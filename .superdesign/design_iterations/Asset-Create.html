<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>TALOS - Buat Aset Baru</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        html {
            height: 100%;
            overflow: hidden;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            height: 100vh;
            background: #f5f7fa;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, #1a2980 0%, #26d0ce 100%);
            padding: 12px 20px 20px;
            box-shadow: 0 4px 12px rgba(26, 41, 128, 0.15);
            position: relative;
            z-index: 100;
        }

        .status-bar {
            height: 44px;
        }

        .header-content {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .back-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            width: 44px;
            height: 44px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            backdrop-filter: blur(10px);
            transition: all 0.2s ease;
            font-size: 24px;
            color: white;
        }

        .back-btn:active {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(0.95);
        }

        .header-info {
            flex: 1;
        }

        .header-title {
            color: white;
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .header-subtitle {
            color: rgba(255, 255, 255, 0.8);
            font-size: 13px;
        }

        /* Progress Indicator */
        .progress-section {
            background: white;
            padding: 16px 20px;
            border-bottom: 1px solid #f0f3f7;
        }

        .progress-bar {
            height: 6px;
            background: #e8ecef;
            border-radius: 3px;
            overflow: hidden;
            margin-bottom: 8px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #1a2980 0%, #26d0ce 100%);
            border-radius: 3px;
            transition: width 0.3s ease;
        }

        .progress-text {
            font-size: 12px;
            color: #6b7c8d;
            text-align: center;
        }

        /* Form Container */
        .form-container {
            flex: 1;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            padding: 20px;
        }

        .form-section {
            background: white;
            border-radius: 20px;
            padding: 24px;
            margin-bottom: 16px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
        }

        .section-title {
            font-size: 16px;
            font-weight: 700;
            color: #1a2332;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .section-icon {
            font-size: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group:last-child {
            margin-bottom: 0;
        }

        .form-label {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 14px;
            font-weight: 600;
            color: #1a2332;
            margin-bottom: 8px;
        }

        .required-mark {
            color: #ff4757;
            font-size: 16px;
        }

        .optional-badge {
            background: #e8ecef;
            color: #6b7c8d;
            padding: 2px 8px;
            border-radius: 6px;
            font-size: 11px;
            font-weight: 600;
        }

        .input-wrapper {
            position: relative;
        }

        .input-icon {
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 20px;
            color: #95a5a6;
            pointer-events: none;
        }

        .form-input {
            width: 100%;
            padding: 16px 16px 16px 50px;
            border: 2px solid #e8ecef;
            border-radius: 14px;
            font-size: 15px;
            font-family: inherit;
            background: #f8f9fa;
            transition: all 0.25s ease;
            -webkit-appearance: none;
            appearance: none;
        }

        .form-input:focus {
            outline: none;
            border-color: #26d0ce;
            background: white;
            box-shadow: 0 0 0 3px rgba(38, 208, 206, 0.1);
        }

        .form-input::placeholder {
            color: #bdc3c7;
        }

        .form-input.error {
            border-color: #ff4757;
            background: rgba(255, 71, 87, 0.05);
        }

        /* Select Dropdown */
        .form-select {
            width: 100%;
            padding: 16px 50px 16px 50px;
            border: 2px solid #e8ecef;
            border-radius: 14px;
            font-size: 15px;
            font-family: inherit;
            background: #f8f9fa;
            background-image: url("data:image/svg+xml,%3Csvg width='12' height='8' viewBox='0 0 12 8' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1L6 6L11 1' stroke='%2395a5a6' stroke-width='2' stroke-linecap='round'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 16px center;
            transition: all 0.25s ease;
            cursor: pointer;
            -webkit-appearance: none;
            appearance: none;
        }

        .form-select:focus {
            outline: none;
            border-color: #26d0ce;
            background-color: white;
            box-shadow: 0 0 0 3px rgba(38, 208, 206, 0.1);
        }

        .form-select.error {
            border-color: #ff4757;
            background-color: rgba(255, 71, 87, 0.05);
        }

        .helper-text {
            font-size: 12px;
            color: #95a5a6;
            margin-top: 6px;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .error-text {
            font-size: 12px;
            color: #ff4757;
            margin-top: 6px;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        /* Image Upload */
        .image-upload-area {
            border: 2px dashed #e8ecef;
            border-radius: 14px;
            padding: 32px 20px;
            text-align: center;
            background: #f8f9fa;
            cursor: pointer;
            transition: all 0.25s ease;
        }

        .image-upload-area:hover {
            border-color: #26d0ce;
            background: rgba(38, 208, 206, 0.05);
        }

        .upload-icon {
            font-size: 48px;
            margin-bottom: 12px;
            opacity: 0.5;
        }

        .upload-text {
            font-size: 14px;
            color: #6b7c8d;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .upload-subtext {
            font-size: 12px;
            color: #95a5a6;
        }

        .image-preview {
            position: relative;
            margin-top: 12px;
        }

        .preview-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 14px;
        }

        .remove-image {
            position: absolute;
            top: 8px;
            right: 8px;
            background: rgba(255, 71, 87, 0.9);
            color: white;
            border: none;
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 18px;
        }

        /* Action Buttons */
        .action-buttons {
            position: sticky;
            bottom: 0;
            background: white;
            padding: 16px 20px;
            border-top: 1px solid #f0f3f7;
            display: flex;
            gap: 12px;
            box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.06);
        }

        .btn {
            flex: 1;
            padding: 16px;
            border: none;
            border-radius: 14px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn:active {
            transform: scale(0.98);
        }

        .btn-secondary {
            background: #f8f9fa;
            color: #5a6c7d;
            border: 2px solid #e8ecef;
        }

        .btn-secondary:active {
            background: #e8ecef;
        }

        .btn-primary {
            background: linear-gradient(135deg, #1a2980 0%, #26d0ce 100%);
            color: white;
            box-shadow: 0 4px 12px rgba(26, 41, 128, 0.2);
        }

        .btn-primary:active {
            box-shadow: 0 2px 8px rgba(26, 41, 128, 0.3);
        }

        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Safe area */
        @supports (padding: max(0px)) {
            body {
                padding-left: max(0px, env(safe-area-inset-left));
                padding-right: max(0px, env(safe-area-inset-right));
            }

            .action-buttons {
                padding-bottom: max(16px, env(safe-area-inset-bottom));
            }
        }

        /* Responsive */
        @media (min-width: 768px) {
            .form-container {
                max-width: 600px;
                margin: 0 auto;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="status-bar"></div>

        <div class="header-content" style="position:relative;">
            <button class="back-btn" onclick="goBack()">←</button>
            <div class="header-info">
                <h1 class="header-title">Buat Aset Baru</h1>
                <p class="header-subtitle">Lengkapi informasi aset</p>
            </div>
        </div>
    </header>

    <!-- Form Container -->
    <form class="form-container" id="assetForm" onsubmit="handleSubmit(event)">
        <!-- Basic Information -->
        <div class="form-section">
            <h2 class="section-title">
                <span class="section-icon">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                        <rect x="5" y="3" width="14" height="18" rx="2" fill="#26d0ce"/>
                        <path d="M8 3V1M16 3V1" stroke="#1a2980" stroke-width="2" stroke-linecap="round"/>
                        <rect x="8" y="8" width="8" height="2" rx="1" fill="#e8ecef"/>
                        <rect x="8" y="12" width="8" height="2" rx="1" fill="#e8ecef"/>
                        <rect x="8" y="16" width="5" height="2" rx="1" fill="#e8ecef"/>
                    </svg>
                </span>
                <span>Informasi Dasar</span>
            </h2>

            <div class="form-group">
                <label class="form-label">
                    <span>Nama Aset</span>
                    <span class="required-mark">*</span>
                </label>
                <div class="input-wrapper">
                    <span class="input-icon">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                            <path d="M21.41 11.58l-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.55-.23-1.06-.59-1.42z" fill="#26d0ce"/>
                            <circle cx="6.5" cy="6.5" r="1.5" fill="#e8ecef"/>
                            <path d="M12 8L16 12" stroke="#1a2980" stroke-width="1.5" stroke-linecap="round"/>
                        </svg>
                    </span>
                    <input
                        type="text"
                        class="form-input"
                        id="assetName"
                        placeholder="Contoh: Tripod Professional"
                        required
                        oninput="validateForm()"
                    >
                </div>
                <div class="helper-text">
                    <span>
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none">
                            <path d="M12 2C8.13 2 5 5.13 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.87-3.13-7-7-7z" fill="#26d0ce"/>
                            <rect x="9" y="18" width="6" height="2" rx="1" fill="#1a2980"/>
                            <circle cx="12" cy="9" r="2" fill="#e8ecef"/>
                        </svg>
                    </span>
                    <span>Berikan nama yang jelas dan deskriptif</span>
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">
                    <span>Tipe Aset</span>
                    <span class="required-mark">*</span>
                </label>
                <div class="input-wrapper">
                    <span class="input-icon">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                            <path d="M10 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z" fill="#26d0ce"/>
                            <rect x="4" y="8" width="16" height="10" rx="1" fill="#1a2980" opacity="0.3"/>
                            <rect x="6" y="10" width="12" height="6" rx="1" fill="#e8ecef"/>
                        </svg>
                    </span>
                    <input
                        type="text"
                        class="form-input"
                        id="assetType"
                        placeholder="Contoh: Equipment Photography"
                        required
                        oninput="validateForm()"
                    >
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">
                    <span>Kategori</span>
                    <span class="required-mark">*</span>
                </label>
                <div class="input-wrapper">
                    <span class="input-icon">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                            <rect x="3" y="5" width="18" height="14" rx="2" fill="#26d0ce"/>
                            <path d="M3 9h18" stroke="#e8ecef" stroke-width="2"/>
                            <rect x="6" y="2" width="4" height="3" rx="1" fill="#1a2980"/>
                            <rect x="14" y="2" width="4" height="3" rx="1" fill="#1a2980"/>
                            <rect x="6" y="12" width="12" height="2" rx="1" fill="#e8ecef"/>
                            <rect x="6" y="15" width="8" height="2" rx="1" fill="#e8ecef"/>
                        </svg>
                    </span>
                    <select class="form-select" id="category" required onchange="validateForm()">
                        <option value="">Pilih Kategori</option>
                        <option value="elektronik">Elektronik</option>
                        <option value="furniture">Furniture</option>
                        <option value="kendaraan">Kendaraan</option>
                        <option value="alat-berat">Alat Berat</option>
                        <option value="komputer">Komputer & IT</option>
                        <option value="lainnya">Lainnya</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Product Details -->
        <div class="form-section">
            <h2 class="section-title">
                <span class="section-icon">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                        <path d="M22.7 19l-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6 6 9 1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4z" fill="#26d0ce"/>
                        <circle cx="7" cy="7" r="2" fill="#e8ecef"/>
                        <path d="M19 15l-3 3" stroke="#1a2980" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </span>
                <span>Detail Produk</span>
            </h2>

            <div class="form-group">
                <label class="form-label">
                    <span>Produsen / Brand</span>
                    <span class="optional-badge">Optional</span>
                </label>
                <div class="input-wrapper">
                    <span class="input-icon">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                            <rect x="2" y="10" width="8" height="12" fill="#26d0ce"/>
                            <rect x="10" y="6" width="8" height="16" fill="#1a2980"/>
                            <rect x="18" y="4" width="4" height="18" fill="#26d0ce"/>
                            <rect x="4" y="13" width="2" height="3" fill="#e8ecef"/>
                            <rect x="7" y="13" width="2" height="3" fill="#e8ecef"/>
                            <rect x="12" y="9" width="2" height="3" fill="#e8ecef"/>
                            <rect x="15" y="9" width="2" height="3" fill="#e8ecef"/>
                        </svg>
                    </span>
                    <input
                        type="text"
                        class="form-input"
                        id="producer"
                        placeholder="Contoh: Manfrotto"
                        oninput="validateForm()"
                    >
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">
                    <span>Model</span>
                    <span class="optional-badge">Optional</span>
                </label>
                <div class="input-wrapper">
                    <span class="input-icon">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                            <path d="M6 2h12c1.1 0 2 .9 2 2v18l-8-3.5L4 22V4c0-1.1.9-2 2-2z" fill="#26d0ce"/>
                            <rect x="8" y="6" width="8" height="2" rx="1" fill="#e8ecef"/>
                            <rect x="8" y="10" width="6" height="2" rx="1" fill="#1a2980"/>
                        </svg>
                    </span>
                    <input
                        type="text"
                        class="form-input"
                        id="model"
                        placeholder="Contoh: MT055XPRO3"
                        oninput="validateForm()"
                    >
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">
                    <span>Nomor Seri</span>
                    <span class="optional-badge">Optional</span>
                </label>
                <div class="input-wrapper">
                    <span class="input-icon">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                            <rect x="2" y="2" width="20" height="20" rx="4" fill="#26d0ce"/>
                            <path d="M9 7v10M15 7v10M7 9h10M7 15h10" stroke="#e8ecef" stroke-width="2" stroke-linecap="round"/>
                            <rect x="8" y="8" width="2" height="2" fill="#1a2980"/>
                            <rect x="14" y="8" width="2" height="2" fill="#1a2980"/>
                            <rect x="8" y="14" width="2" height="2" fill="#1a2980"/>
                            <rect x="14" y="14" width="2" height="2" fill="#1a2980"/>
                        </svg>
                    </span>
                    <input
                        type="text"
                        class="form-input"
                        id="serialNumber"
                        placeholder="Contoh: SN-123456789"
                        oninput="validateForm()"
                    >
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">
                    <span>Tahun Pembelian</span>
                    <span class="optional-badge">Optional</span>
                </label>
                <div class="input-wrapper">
                    <span class="input-icon">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                            <rect x="3" y="4" width="18" height="18" rx="2" fill="#26d0ce"/>
                            <path d="M16 2V6M8 2V6" stroke="#1a2980" stroke-width="2" stroke-linecap="round"/>
                            <path d="M3 10H21" stroke="#e8ecef" stroke-width="2"/>
                            <circle cx="12" cy="15" r="2" fill="#1a2980"/>
                        </svg>
                    </span>
                    <select class="form-select" id="year" onchange="validateForm()">
                        <option value="">Pilih Tahun</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Location & Condition -->
        <div class="form-section">
            <h2 class="section-title">
                <span class="section-icon">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                        <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z" fill="#26d0ce"/>
                        <circle cx="12" cy="9" r="3" fill="#e8ecef"/>
                        <circle cx="12" cy="9" r="1.5" fill="#1a2980"/>
                    </svg>
                </span>
                <span>Lokasi & Kondisi</span>
            </h2>

            <div class="form-group">
                <label class="form-label">
                    <span>Lokasi</span>
                    <span class="required-mark">*</span>
                </label>
                <div class="input-wrapper">
                    <span class="input-icon">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                            <rect x="4" y="2" width="16" height="20" rx="2" fill="#26d0ce"/>
                            <rect x="8" y="6" width="3" height="3" fill="#1a2980"/>
                            <rect x="13" y="6" width="3" height="3" fill="#1a2980"/>
                            <rect x="8" y="11" width="3" height="3" fill="#1a2980"/>
                            <rect x="13" y="11" width="3" height="3" fill="#1a2980"/>
                            <rect x="8" y="16" width="8" height="4" fill="#e8ecef"/>
                        </svg>
                    </span>
                    <select class="form-select" id="location" required onchange="validateForm()">
                        <option value="">Pilih Lokasi</option>
                        <option value="gedung-a-lt1">Gedung A - Lantai 1</option>
                        <option value="gedung-a-lt2">Gedung A - Lantai 2</option>
                        <option value="gedung-a-lt3">Gedung A - Lantai 3</option>
                        <option value="gedung-b-lt1">Gedung B - Lantai 1</option>
                        <option value="gedung-b-lt2">Gedung B - Lantai 2</option>
                        <option value="warehouse">Warehouse</option>
                    </select>
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">
                    <span>Kondisi Aset</span>
                    <span class="required-mark">*</span>
                </label>
                <div class="input-wrapper">
                    <span class="input-icon">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                            <circle cx="12" cy="12" r="3" fill="#e8ecef"/>
                            <path d="M12 2L14.5 7.5L20 8.5L16 13L17 19L12 16L7 19L8 13L4 8.5L9.5 7.5L12 2Z" fill="#26d0ce" opacity="0.7"/>
                            <circle cx="12" cy="12" r="4" stroke="#1a2980" stroke-width="1.5" fill="none"/>
                            <path d="M12 8V10M12 14V16M8 12H10M14 12H16" stroke="#1a2980" stroke-width="1.5"/>
                        </svg>
                    </span>
                    <select class="form-select" id="condition" required onchange="validateForm()">
                        <option value="">Pilih Kondisi</option>
                        <option value="excellent">Excellent - Seperti Baru</option>
                        <option value="good">Good - Kondisi Baik</option>
                        <option value="fair">Fair - Perlu Perhatian</option>
                        <option value="poor">Poor - Perlu Perbaikan</option>
                        <option value="broken">Broken - Rusak</option>
                    </select>
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">
                    <span>Penanggung Jawab</span>
                    <span class="required-mark">*</span>
                </label>
                <div class="input-wrapper">
                    <span class="input-icon">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                            <circle cx="12" cy="8" r="4" fill="#26d0ce"/>
                            <path d="M12 14C7.58172 14 4 17.5817 4 22H20C20 17.5817 16.4183 14 12 14Z" fill="#1a2980"/>
                            <circle cx="12" cy="8" r="2" fill="#e8ecef"/>
                        </svg>
                    </span>
                    <select class="form-select" id="responsible" required onchange="validateForm()">
                        <option value="">Pilih Penanggung Jawab</option>
                        <option value="albar">Albar Muqsit</option>
                        <option value="stefanus">Stefanus Juanto</option>
                        <option value="budi">Budi Santoso</option>
                        <option value="rina">Rina Wijaya</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Image Upload -->
        <div class="form-section">
            <h2 class="section-title">
                <span class="section-icon">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                        <rect x="3" y="5" width="18" height="14" rx="3" fill="#26d0ce"/>
                        <rect x="5" y="7" width="14" height="10" rx="2" fill="#1a2980" opacity="0.4"/>
                        <circle cx="12" cy="12" r="3.5" stroke="#e8ecef" stroke-width="2" fill="#1a2980"/>
                        <circle cx="17" cy="8" r="1" fill="#e8ecef"/>
                    </svg>
                </span>
                <span>Foto Aset</span>
            </h2>

            <div class="form-group">
                <label class="form-label">
                    <span>Upload Gambar</span>
                    <span class="optional-badge">Optional</span>
                </label>
                <div class="image-upload-area" onclick="document.getElementById('imageInput').click()">
                    <div class="upload-icon">
                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none">
                            <rect x="3" y="5" width="18" height="14" rx="3" fill="#26d0ce"/>
                            <rect x="5" y="7" width="14" height="10" rx="2" fill="#1a2980" opacity="0.3"/>
                            <circle cx="12" cy="12" r="3.5" stroke="#e8ecef" stroke-width="2" fill="#1a2980"/>
                            <circle cx="17" cy="8" r="1.5" fill="#e8ecef"/>
                            <path d="M8 7L10 5L12 7" stroke="#26d0ce" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <div class="upload-text">Tap untuk upload foto</div>
                    <div class="upload-subtext">JPG, PNG, max 5MB</div>
                </div>
                <input type="file" id="imageInput" accept="image/*" style="display: none;" onchange="handleImageUpload(event)">
                <div id="imagePreview" class="image-preview" style="display: none;">
                    <img id="previewImg" class="preview-image" alt="Preview">
                    <button type="button" class="remove-image" onclick="removeImage()">✕</button>
                </div>
            </div>
        </div>

        <!-- Additional Notes -->
        <div class="form-section">
            <h2 class="section-title">
                <span class="section-icon">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                        <rect x="4" y="2" width="14" height="20" rx="2" fill="#26d0ce"/>
                        <path d="M8 7H14M8 11H14M8 15H11" stroke="#e8ecef" stroke-width="1.5" stroke-linecap="round"/>
                        <path d="M18 2V10L15 8L18 2Z" fill="#1a2980"/>
                    </svg>
                </span>
                <span>Catatan Tambahan</span>
            </h2>

            <div class="form-group">
                <label class="form-label">
                    <span>Deskripsi / Notes</span>
                    <span class="optional-badge">Optional</span>
                </label>
                <div class="input-wrapper">
                    <textarea
                        class="form-input"
                        id="notes"
                        placeholder="Tambahkan catatan atau deskripsi tambahan..."
                        rows="4"
                        style="padding: 14px; resize: vertical;"
                        oninput="validateForm()"
                    ></textarea>
                </div>
                <div class="helper-text">
                    <span>
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none">
                            <path d="M12 2C8.13 2 5 5.13 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.87-3.13-7-7-7z" fill="#26d0ce"/>
                            <rect x="9" y="18" width="6" height="2" rx="1" fill="#1a2980"/>
                            <circle cx="12" cy="9" r="2" fill="#e8ecef"/>
                        </svg>
                    </span>
                    <span>Informasi tambahan yang perlu dicatat</span>
                </div>
            </div>
        </div>
    </form>

    <!-- Action Buttons -->
    <div class="action-buttons">
        <button type="submit" form="assetForm" class="btn btn-primary" id="submitBtn" disabled>
            <span>✓</span>
            <span>Simpan Aset</span>
        </button>
    </div>

    <script>
        // Prevent zoom on input focus for iOS
        document.addEventListener('touchstart', function() {}, {passive: true});

        // Populate year dropdown
        const yearSelect = document.getElementById('year');
        const currentYear = new Date().getFullYear();
        for (let year = currentYear; year >= currentYear - 30; year--) {
            const option = document.createElement('option');
            option.value = year;
            option.textContent = year;
            yearSelect.appendChild(option);
        }

        function validateForm() {
            const form = document.getElementById('assetForm');
            const submitBtn = document.getElementById('submitBtn');
            const progressFill = document.getElementById('progressFill');
            const progressText = document.getElementById('progressText');

            // Required fields
            const requiredFields = [
                document.getElementById('assetName'),
                document.getElementById('assetType'),
                document.getElementById('category'),
                document.getElementById('location'),
                document.getElementById('condition'),
                document.getElementById('responsible')
            ];

            // All fields including optional
            const allFields = [
                ...requiredFields,
                document.getElementById('producer'),
                document.getElementById('model'),
                document.getElementById('serialNumber'),
                document.getElementById('year'),
                document.getElementById('notes')
            ];

            // Check if all required fields are filled
            const allRequiredFilled = requiredFields.every(field => {
                return field.value.trim() !== '';
            });

            // Calculate progress
            const filledFields = allFields.filter(field => field.value.trim() !== '').length;
            const progress = Math.round((filledFields / allFields.length) * 100);

            progressFill.style.width = progress + '%';
            progressText.textContent = progress + '% selesai';

            // Enable/disable submit button
            submitBtn.disabled = !allRequiredFilled;
        }

        function handleImageUpload(event) {
            const file = event.target.files[0];
            if (!file) return;

            // Validate file size (5MB)
            if (file.size > 5 * 1024 * 1024) {
                alert('Ukuran file terlalu besar! Maksimal 5MB');
                return;
            }

            // Validate file type
            if (!file.type.startsWith('image/')) {
                alert('File harus berupa gambar!');
                return;
            }

            // Show preview
            const reader = new FileReader();
            reader.onload = function(e) {
                document.getElementById('previewImg').src = e.target.result;
                document.getElementById('imagePreview').style.display = 'block';
            };
            reader.readAsDataURL(file);
        }

        function removeImage() {
            document.getElementById('imageInput').value = '';
            document.getElementById('imagePreview').style.display = 'none';
        }

        function handleSubmit(event) {
            event.preventDefault();

            const formData = {
                assetName: document.getElementById('assetName').value,
                assetType: document.getElementById('assetType').value,
                category: document.getElementById('category').value,
                producer: document.getElementById('producer').value,
                model: document.getElementById('model').value,
                serialNumber: document.getElementById('serialNumber').value,
                year: document.getElementById('year').value,
                location: document.getElementById('location').value,
                condition: document.getElementById('condition').value,
                responsible: document.getElementById('responsible').value,
                notes: document.getElementById('notes').value
            };

            console.log('Form submitted:', formData);

            // Show loading
            const submitBtn = document.getElementById('submitBtn');
            submitBtn.textContent = 'Menyimpan...';
            submitBtn.disabled = true;

            // Simulate API call
            setTimeout(() => {
                alert('Aset berhasil dibuat!\n\nID: AS#' + Math.floor(Math.random() * 90000 + 10000));
                goBack();
            }, 1500);
        }

        function saveDraft() {
            const formData = {
                assetName: document.getElementById('assetName').value,
                assetType: document.getElementById('assetType').value,
                category: document.getElementById('category').value,
                // ... other fields
            };

            console.log('Draft saved:', formData);
            alert('Draft berhasil disimpan!');
        }

        function goBack() {
            if (confirm('Keluar dari form? Perubahan yang belum disimpan akan hilang.')) {
                window.history.back();
            }
        }

        // Handle viewport height changes
        let vh = window.innerHeight * 0.01;
        document.documentElement.style.setProperty('--vh', `${vh}px`);

        window.addEventListener('resize', () => {
            let vh = window.innerHeight * 0.01;
            document.documentElement.style.setProperty('--vh', `${vh}px`);
        });
    </script>
</body>
</html>
