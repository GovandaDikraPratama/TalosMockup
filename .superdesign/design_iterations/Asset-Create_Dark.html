<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>TALOS - Buat Aset Baru (Dark Mode)</title>
    <!-- Flaticon CSS -->
    <link rel="stylesheet" href="https://cdn-uicons.flaticon.com/2.0.0/uicons-regular-rounded/css/uicons-regular-rounded.css">
    <link rel="stylesheet" href="https://cdn-uicons.flaticon.com/2.0.0/uicons-solid-rounded/css/uicons-solid-rounded.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        html {
            height: 100%;
            overflow: hidden;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            height: 100vh;
            background: linear-gradient(135deg, #0f0c29 0%, #1a1a2e 50%, #16213e 100%);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            color: #e4e4e7;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, #1a2980 0%, #26d0ce 100%);
            padding: 12px 20px 20px;
            box-shadow: 0 8px 24px rgba(38, 208, 206, 0.3),
                        0 4px 12px rgba(26, 41, 128, 0.4);
            position: relative;
            z-index: 100;
        }

        .status-bar {
            height: 44px;
        }

        .header-content {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .back-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            width: 44px;
            height: 44px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            backdrop-filter: blur(10px);
            transition: all 0.2s ease;
            font-size: 24px;
            color: white;
        }

        .back-btn:active {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(0.95);
        }

        .back-btn .icon-three-tone {
            background: white;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 24px;
        }

        .header-info {
            flex: 1;
        }

        .header-title {
            color: white;
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 4px;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        .header-subtitle {
            color: rgba(255, 255, 255, 0.8);
            font-size: 13px;
        }

        /* Progress Indicator */
        .progress-section {
            background: rgba(24, 24, 27, 0.7);
            backdrop-filter: blur(10px);
            padding: 16px 20px;
            border-bottom: 1px solid rgba(63, 63, 70, 0.5);
        }

        .progress-bar {
            height: 6px;
            background: rgba(63, 63, 70, 0.5);
            border-radius: 3px;
            overflow: hidden;
            margin-bottom: 8px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #26d0ce 0%, #1a9cff 100%);
            border-radius: 3px;
            transition: width 0.3s ease;
            box-shadow: 0 0 10px rgba(38, 208, 206, 0.5);
        }

        .progress-text {
            font-size: 12px;
            color: #a1a1aa;
            text-align: center;
        }

        /* Form Container */
        .form-container {
            flex: 1;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            padding: 20px;
        }

        .form-section {
            background: rgba(24, 24, 27, 0.7);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 24px;
            margin-bottom: 16px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(63, 63, 70, 0.5);
        }

        .section-title {
            font-size: 16px;
            font-weight: 700;
            color: #e4e4e7;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .section-icon {
            font-size: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group:last-child {
            margin-bottom: 0;
        }

        .form-label {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 14px;
            font-weight: 600;
            color: #e4e4e7;
            margin-bottom: 8px;
        }

        .required-mark {
            color: #f87171;
            font-size: 16px;
        }

        .optional-badge {
            background: rgba(63, 63, 70, 0.6);
            color: #a1a1aa;
            padding: 2px 8px;
            border-radius: 6px;
            font-size: 11px;
            font-weight: 600;
        }

        .input-wrapper {
            position: relative;
        }

        .input-icon {
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 20px;
            color: #71717a;
            pointer-events: none;
        }

        .form-input {
            width: 100%;
            padding: 16px 16px 16px 50px;
            border: 2px solid rgba(63, 63, 70, 0.6);
            border-radius: 14px;
            font-size: 15px;
            font-family: inherit;
            background: rgba(24, 24, 27, 0.9);
            transition: all 0.25s ease;
            -webkit-appearance: none;
            appearance: none;
            color: #e4e4e7;
        }

        .form-input:focus {
            outline: none;
            border-color: #26d0ce;
            background: rgba(24, 24, 27, 1);
            box-shadow: 0 0 0 3px rgba(38, 208, 206, 0.15),
                        0 8px 24px rgba(38, 208, 206, 0.1);
        }

        .form-input::placeholder {
            color: #52525b;
        }

        .form-input.error {
            border-color: #f87171;
            background: rgba(248, 113, 113, 0.1);
        }

        /* Select Dropdown */
        .form-select {
            width: 100%;
            padding: 16px 50px 16px 50px;
            border: 2px solid rgba(63, 63, 70, 0.6);
            border-radius: 14px;
            font-size: 15px;
            font-family: inherit;
            background: rgba(24, 24, 27, 0.9);
            background-image: url("data:image/svg+xml,%3Csvg width='12' height='8' viewBox='0 0 12 8' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1L6 6L11 1' stroke='%2371717a' stroke-width='2' stroke-linecap='round'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 16px center;
            transition: all 0.25s ease;
            cursor: pointer;
            -webkit-appearance: none;
            appearance: none;
            color: #e4e4e7;
        }

        .form-select:focus {
            outline: none;
            border-color: #26d0ce;
            background-color: rgba(24, 24, 27, 1);
            box-shadow: 0 0 0 3px rgba(38, 208, 206, 0.15),
                        0 8px 24px rgba(38, 208, 206, 0.1);
        }

        .form-select.error {
            border-color: #f87171;
            background-color: rgba(248, 113, 113, 0.1);
        }

        .form-select option {
            background: #1a1a2e;
            color: #e4e4e7;
        }

        .helper-text {
            font-size: 12px;
            color: #71717a;
            margin-top: 6px;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .error-text {
            font-size: 12px;
            color: #f87171;
            margin-top: 6px;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        /* Image Upload */
        .image-upload-area {
            border: 2px dashed rgba(63, 63, 70, 0.6);
            border-radius: 14px;
            padding: 32px 20px;
            text-align: center;
            background: rgba(38, 208, 206, 0.05);
            cursor: pointer;
            transition: all 0.25s ease;
        }

        .image-upload-area:hover {
            border-color: #26d0ce;
            background: rgba(38, 208, 206, 0.1);
            box-shadow: 0 0 20px rgba(38, 208, 206, 0.15);
        }

        .upload-icon {
            font-size: 48px;
            margin-bottom: 12px;
            opacity: 0.5;
        }

        .upload-text {
            font-size: 14px;
            color: #a1a1aa;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .upload-subtext {
            font-size: 12px;
            color: #71717a;
        }

        .image-preview {
            position: relative;
            margin-top: 12px;
        }

        .preview-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 14px;
            border: 2px solid rgba(38, 208, 206, 0.3);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
        }

        .remove-image {
            position: absolute;
            top: 8px;
            right: 8px;
            background: rgba(248, 113, 113, 0.9);
            color: white;
            border: none;
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 18px;
            box-shadow: 0 4px 12px rgba(248, 113, 113, 0.4);
        }

        .remove-image:active {
            transform: scale(0.95);
        }

        /* Action Buttons */
        .action-buttons {
            position: sticky;
            bottom: 0;
            background: rgba(24, 24, 27, 0.95);
            backdrop-filter: blur(20px);
            padding: 16px 20px;
            border-top: 1px solid rgba(63, 63, 70, 0.5);
            display: flex;
            gap: 12px;
            box-shadow: 0 -8px 24px rgba(0, 0, 0, 0.3);
        }

        .btn {
            flex: 1;
            padding: 16px;
            border: none;
            border-radius: 14px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn:active {
            transform: scale(0.98);
        }

        .btn-secondary {
            background: rgba(38, 208, 206, 0.1);
            color: #a1a1aa;
            border: 2px solid rgba(63, 63, 70, 0.6);
        }

        .btn-secondary:active {
            background: rgba(38, 208, 206, 0.2);
            border-color: rgba(38, 208, 206, 0.3);
        }

        .btn-primary {
            background: linear-gradient(135deg, #26d0ce 0%, #1a9cff 100%);
            color: white;
            box-shadow: 0 8px 24px rgba(38, 208, 206, 0.35),
                        0 4px 12px rgba(26, 156, 255, 0.25);
        }

        .btn-primary:active {
            box-shadow: 0 4px 16px rgba(38, 208, 206, 0.4),
                        0 2px 8px rgba(26, 156, 255, 0.3);
        }

        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            background: linear-gradient(135deg, rgba(38, 208, 206, 0.3) 0%, rgba(26, 156, 255, 0.3) 100%);
            box-shadow: none;
        }

        /* Safe area */
        @supports (padding: max(0px)) {
            body {
                padding-left: max(0px, env(safe-area-inset-left));
                padding-right: max(0px, env(safe-area-inset-right));
            }

            .action-buttons {
                padding-bottom: max(16px, env(safe-area-inset-bottom));
            }
        }

        /* Responsive */
        @media (min-width: 768px) {
            .form-container {
                max-width: 600px;
                margin: 0 auto;
            }
        }

        /* Smooth scrollbar */
        .form-container::-webkit-scrollbar {
            width: 8px;
        }

        .form-container::-webkit-scrollbar-track {
            background: rgba(24, 24, 27, 0.5);
        }

        .form-container::-webkit-scrollbar-thumb {
            background: rgba(38, 208, 206, 0.3);
            border-radius: 4px;
        }

        .form-container::-webkit-scrollbar-thumb:hover {
            background: rgba(38, 208, 206, 0.5);
        }

        /* Glassmorphism effects */
        .progress-section,
        .form-section,
        .action-buttons {
            -webkit-backdrop-filter: blur(10px);
        }

        /* Textarea specific styling */
        textarea.form-input {
            padding: 14px;
            resize: vertical;
        }

        /* Three-tone icon styling */
        .icon-three-tone {
            position: relative;
            display: inline-block;
            background: linear-gradient(135deg, #26d0ce 0%, #1a9cff 50%, #a78bfa 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            filter: drop-shadow(0 2px 4px rgba(38, 208, 206, 0.3));
        }

        .section-icon .icon-three-tone {
            font-size: 20px;
        }

        .input-icon .icon-three-tone {
            background: linear-gradient(135deg, #71717a 0%, #a1a1aa 50%, #d4d4d8 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            transition: all 0.3s ease;
        }

        .input-wrapper:focus-within .input-icon .icon-three-tone {
            background: linear-gradient(135deg, #26d0ce 0%, #1a9cff 50%, #a78bfa 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .upload-icon .icon-three-tone {
            font-size: 48px;
            background: linear-gradient(135deg, #26d0ce 0%, #1a9cff 50%, #a78bfa 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .helper-text .icon-three-tone {
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 50%, #d97706 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .btn-primary .icon-three-tone {
            background: white;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .remove-image i {
            color: white;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="status-bar"></div>

        <div class="header-content" style="position:relative;">
            <button class="back-btn" onclick="goBack()"><i class="fi fi-rr-angle-left icon-three-tone"></i></button>
            <div class="header-info">
                <h1 class="header-title">Buat Aset Baru</h1>
                <p class="header-subtitle">Lengkapi informasi aset</p>
            </div>
        </div>
    </header>

    <!-- Form Container -->
    <form class="form-container" id="assetForm" onsubmit="handleSubmit(event)">
        <!-- Basic Information -->
        <div class="form-section">
            <h2 class="section-title">
                <span class="section-icon"><i class="fi fi-rr-clipboard-list icon-three-tone"></i></span>
                <span>Informasi Dasar</span>
            </h2>

            <div class="form-group">
                <label class="form-label">
                    <span>Nama Aset</span>
                    <span class="required-mark">*</span>
                </label>
                <div class="input-wrapper">
                    <span class="input-icon"><i class="fi fi-rr-label icon-three-tone"></i></span>
                    <input
                        type="text"
                        class="form-input"
                        id="assetName"
                        placeholder="Contoh: Tripod Professional"
                        required
                        oninput="validateForm()"
                    >
                </div>
                <div class="helper-text">
                    <span><i class="fi fi-rr-bulb icon-three-tone"></i></span>
                    <span>Berikan nama yang jelas dan deskriptif</span>
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">
                    <span>Tipe Aset</span>
                    <span class="required-mark">*</span>
                </label>
                <div class="input-wrapper">
                    <span class="input-icon"><i class="fi fi-rr-folder icon-three-tone"></i></span>
                    <input
                        type="text"
                        class="form-input"
                        id="assetType"
                        placeholder="Contoh: Equipment Photography"
                        required
                        oninput="validateForm()"
                    >
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">
                    <span>Kategori</span>
                    <span class="required-mark">*</span>
                </label>
                <div class="input-wrapper">
                    <span class="input-icon"><i class="fi fi-rr-apps icon-three-tone"></i></span>
                    <select class="form-select" id="category" required onchange="validateForm()">
                        <option value="">Pilih Kategori</option>
                        <option value="elektronik">Elektronik</option>
                        <option value="furniture">Furniture</option>
                        <option value="kendaraan">Kendaraan</option>
                        <option value="alat-berat">Alat Berat</option>
                        <option value="komputer">Komputer & IT</option>
                        <option value="lainnya">Lainnya</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Product Details -->
        <div class="form-section">
            <h2 class="section-title">
                <span class="section-icon"><i class="fi fi-rr-settings icon-three-tone"></i></span>
                <span>Detail Produk</span>
            </h2>

            <div class="form-group">
                <label class="form-label">
                    <span>Produsen / Brand</span>
                    <span class="optional-badge">Optional</span>
                </label>
                <div class="input-wrapper">
                    <span class="input-icon"><i class="fi fi-rr-industry-alt icon-three-tone"></i></span>
                    <input
                        type="text"
                        class="form-input"
                        id="producer"
                        placeholder="Contoh: Manfrotto"
                        oninput="validateForm()"
                    >
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">
                    <span>Model</span>
                    <span class="optional-badge">Optional</span>
                </label>
                <div class="input-wrapper">
                    <span class="input-icon"><i class="fi fi-rr-bookmark icon-three-tone"></i></span>
                    <input
                        type="text"
                        class="form-input"
                        id="model"
                        placeholder="Contoh: MT055XPRO3"
                        oninput="validateForm()"
                    >
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">
                    <span>Nomor Seri</span>
                    <span class="optional-badge">Optional</span>
                </label>
                <div class="input-wrapper">
                    <span class="input-icon"><i class="fi fi-rr-hashtag icon-three-tone"></i></span>
                    <input
                        type="text"
                        class="form-input"
                        id="serialNumber"
                        placeholder="Contoh: SN-123456789"
                        oninput="validateForm()"
                    >
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">
                    <span>Tahun Pembelian</span>
                    <span class="optional-badge">Optional</span>
                </label>
                <div class="input-wrapper">
                    <span class="input-icon"><i class="fi fi-rr-calendar icon-three-tone"></i></span>
                    <select class="form-select" id="year" onchange="validateForm()">
                        <option value="">Pilih Tahun</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Location & Condition -->
        <div class="form-section">
            <h2 class="section-title">
                <span class="section-icon"><i class="fi fi-rr-marker icon-three-tone"></i></span>
                <span>Lokasi & Kondisi</span>
            </h2>

            <div class="form-group">
                <label class="form-label">
                    <span>Lokasi</span>
                    <span class="required-mark">*</span>
                </label>
                <div class="input-wrapper">
                    <span class="input-icon"><i class="fi fi-rr-building icon-three-tone"></i></span>
                    <select class="form-select" id="location" required onchange="validateForm()">
                        <option value="">Pilih Lokasi</option>
                        <option value="gedung-a-lt1">Gedung A - Lantai 1</option>
                        <option value="gedung-a-lt2">Gedung A - Lantai 2</option>
                        <option value="gedung-a-lt3">Gedung A - Lantai 3</option>
                        <option value="gedung-b-lt1">Gedung B - Lantai 1</option>
                        <option value="gedung-b-lt2">Gedung B - Lantai 2</option>
                        <option value="warehouse">Warehouse</option>
                    </select>
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">
                    <span>Kondisi Aset</span>
                    <span class="required-mark">*</span>
                </label>
                <div class="input-wrapper">
                    <span class="input-icon"><i class="fi fi-rr-tool-box icon-three-tone"></i></span>
                    <select class="form-select" id="condition" required onchange="validateForm()">
                        <option value="">Pilih Kondisi</option>
                        <option value="excellent">Excellent - Seperti Baru</option>
                        <option value="good">Good - Kondisi Baik</option>
                        <option value="fair">Fair - Perlu Perhatian</option>
                        <option value="poor">Poor - Perlu Perbaikan</option>
                        <option value="broken">Broken - Rusak</option>
                    </select>
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">
                    <span>Penanggung Jawab</span>
                    <span class="required-mark">*</span>
                </label>
                <div class="input-wrapper">
                    <span class="input-icon"><i class="fi fi-rr-user icon-three-tone"></i></span>
                    <select class="form-select" id="responsible" required onchange="validateForm()">
                        <option value="">Pilih Penanggung Jawab</option>
                        <option value="albar">Albar Muqsit</option>
                        <option value="stefanus">Stefanus Juanto</option>
                        <option value="budi">Budi Santoso</option>
                        <option value="rina">Rina Wijaya</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Image Upload -->
        <div class="form-section">
            <h2 class="section-title">
                <span class="section-icon"><i class="fi fi-rr-camera icon-three-tone"></i></span>
                <span>Foto Aset</span>
            </h2>

            <div class="form-group">
                <label class="form-label">
                    <span>Upload Gambar</span>
                    <span class="optional-badge">Optional</span>
                </label>
                <div class="image-upload-area" onclick="document.getElementById('imageInput').click()">
                    <div class="upload-icon"><i class="fi fi-rr-picture icon-three-tone"></i></div>
                    <div class="upload-text">Tap untuk upload foto</div>
                    <div class="upload-subtext">JPG, PNG, max 5MB</div>
                </div>
                <input type="file" id="imageInput" accept="image/*" style="display: none;" onchange="handleImageUpload(event)">
                <div id="imagePreview" class="image-preview" style="display: none;">
                    <img id="previewImg" class="preview-image" alt="Preview">
                    <button type="button" class="remove-image" onclick="removeImage()"><i class="fi fi-rr-cross"></i></button>
                </div>
            </div>
        </div>

        <!-- Additional Notes -->
        <div class="form-section">
            <h2 class="section-title">
                <span class="section-icon"><i class="fi fi-rr-edit icon-three-tone"></i></span>
                <span>Catatan Tambahan</span>
            </h2>

            <div class="form-group">
                <label class="form-label">
                    <span>Deskripsi / Notes</span>
                    <span class="optional-badge">Optional</span>
                </label>
                <div class="input-wrapper">
                    <textarea
                        class="form-input"
                        id="notes"
                        placeholder="Tambahkan catatan atau deskripsi tambahan..."
                        rows="4"
                        style="padding: 14px; resize: vertical;"
                        oninput="validateForm()"
                    ></textarea>
                </div>
                <div class="helper-text">
                    <span><i class="fi fi-rr-bulb icon-three-tone"></i></span>
                    <span>Informasi tambahan yang perlu dicatat</span>
                </div>
            </div>
        </div>
    </form>

    <!-- Action Buttons -->
    <div class="action-buttons">
        <button type="submit" form="assetForm" class="btn btn-primary" id="submitBtn" disabled>
            <span><i class="fi fi-rr-check icon-three-tone"></i></span>
            <span>Simpan Aset</span>
        </button>
    </div>

    <script>
        // Prevent zoom on input focus for iOS
        document.addEventListener('touchstart', function() {}, {passive: true});

        // Populate year dropdown
        const yearSelect = document.getElementById('year');
        const currentYear = new Date().getFullYear();
        for (let year = currentYear; year >= currentYear - 30; year--) {
            const option = document.createElement('option');
            option.value = year;
            option.textContent = year;
            yearSelect.appendChild(option);
        }

        function validateForm() {
            const form = document.getElementById('assetForm');
            const submitBtn = document.getElementById('submitBtn');
            const progressFill = document.getElementById('progressFill');
            const progressText = document.getElementById('progressText');

            // Required fields
            const requiredFields = [
                document.getElementById('assetName'),
                document.getElementById('assetType'),
                document.getElementById('category'),
                document.getElementById('location'),
                document.getElementById('condition'),
                document.getElementById('responsible')
            ];

            // All fields including optional
            const allFields = [
                ...requiredFields,
                document.getElementById('producer'),
                document.getElementById('model'),
                document.getElementById('serialNumber'),
                document.getElementById('year'),
                document.getElementById('notes')
            ];

            // Check if all required fields are filled
            const allRequiredFilled = requiredFields.every(field => {
                return field.value.trim() !== '';
            });

            // Calculate progress
            const filledFields = allFields.filter(field => field.value.trim() !== '').length;
            const progress = Math.round((filledFields / allFields.length) * 100);

            progressFill.style.width = progress + '%';
            progressText.textContent = progress + '% selesai';

            // Enable/disable submit button
            submitBtn.disabled = !allRequiredFilled;
        }

        function handleImageUpload(event) {
            const file = event.target.files[0];
            if (!file) return;

            // Validate file size (5MB)
            if (file.size > 5 * 1024 * 1024) {
                alert('Ukuran file terlalu besar! Maksimal 5MB');
                return;
            }

            // Validate file type
            if (!file.type.startsWith('image/')) {
                alert('File harus berupa gambar!');
                return;
            }

            // Show preview
            const reader = new FileReader();
            reader.onload = function(e) {
                document.getElementById('previewImg').src = e.target.result;
                document.getElementById('imagePreview').style.display = 'block';
            };
            reader.readAsDataURL(file);
        }

        function removeImage() {
            document.getElementById('imageInput').value = '';
            document.getElementById('imagePreview').style.display = 'none';
        }

        function handleSubmit(event) {
            event.preventDefault();

            const formData = {
                assetName: document.getElementById('assetName').value,
                assetType: document.getElementById('assetType').value,
                category: document.getElementById('category').value,
                producer: document.getElementById('producer').value,
                model: document.getElementById('model').value,
                serialNumber: document.getElementById('serialNumber').value,
                year: document.getElementById('year').value,
                location: document.getElementById('location').value,
                condition: document.getElementById('condition').value,
                responsible: document.getElementById('responsible').value,
                notes: document.getElementById('notes').value
            };

            console.log('Form submitted:', formData);

            // Show loading
            const submitBtn = document.getElementById('submitBtn');
            submitBtn.textContent = 'Menyimpan...';
            submitBtn.disabled = true;

            // Simulate API call
            setTimeout(() => {
                alert('Aset berhasil dibuat!\n\nID: AS#' + Math.floor(Math.random() * 90000 + 10000));
                goBack();
            }, 1500);
        }

        function saveDraft() {
            const formData = {
                assetName: document.getElementById('assetName').value,
                assetType: document.getElementById('assetType').value,
                category: document.getElementById('category').value,
                // ... other fields
            };

            console.log('Draft saved:', formData);
            alert('Draft berhasil disimpan!');
        }

        function goBack() {
            if (confirm('Keluar dari form? Perubahan yang belum disimpan akan hilang.')) {
                window.history.back();
            }
        }

        // Handle viewport height changes
        let vh = window.innerHeight * 0.01;
        document.documentElement.style.setProperty('--vh', `${vh}px`);

        window.addEventListener('resize', () => {
            let vh = window.innerHeight * 0.01;
            document.documentElement.style.setProperty('--vh', `${vh}px`);
        });
    </script>
</body>
</html>
